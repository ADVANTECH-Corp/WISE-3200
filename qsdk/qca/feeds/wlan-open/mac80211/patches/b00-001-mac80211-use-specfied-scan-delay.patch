--- a/net/mac80211/scan.c
+++ b/net/mac80211/scan.c
@@ -732,6 +732,11 @@ static void ieee80211_scan_state_decision(struct ieee80211_local *local,
 	scan_req = rcu_dereference_protected(local->scan_req,
 					     lockdep_is_held(&local->mtx));
 
+	if (scan_req->duration) {
+		local->next_scan_state = SCAN_SET_CHANNEL;
+		goto out;
+	}
+
 	next_chan = scan_req->channels[local->scan_channel_idx];
 
 	/*
@@ -758,7 +763,7 @@ static void ieee80211_scan_state_decision(struct ieee80211_local *local,
 	}
 
 	local->next_scan_state = next_scan_state;
-
+out:
 	*next_delay = 0;
 }
 
@@ -824,7 +829,10 @@ static void ieee80211_scan_state_set_channel(struct ieee80211_local *local,
 	 */
 	if ((chan->flags & (IEEE80211_CHAN_NO_IR | IEEE80211_CHAN_RADAR)) ||
 	    !scan_req->n_ssids) {
-		*next_delay = IEEE80211_PASSIVE_CHANNEL_TIME;
+		if (scan_req->duration)
+			*next_delay = msecs_to_jiffies(scan_req->duration);
+		else
+			*next_delay = IEEE80211_PASSIVE_CHANNEL_TIME;
 		local->next_scan_state = SCAN_DECISION;
 		return;
 	}
